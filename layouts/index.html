{{ define "main" }}
<div class="posts h-feed">
    <div class="post-list" role="main">
      {{ $posts := where .Site.Pages.ByDate.Reverse "Type" "post" }}
      {{ $hidden_posts := where $posts "Params.categories" "intersect" (slice "Article") }}
      {{ $posts = $posts | symdiff $hidden_posts }}
      {{ $paginator := .Paginate ($posts) }}
      {{ if or .IsHome .Site.Params.paginate_categories }}
        {{ $list := $paginator.Pages }}
          {{ if .Site.Taxonomies.categories.article }}
          <div class="title-button">
            <h2 class="post-title">Latest article</h2>
            <a href="https://juhaliikala.com/get-new-articles" class="btn">
              <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="inherit" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M255.4 48.2c.2-.1 .4-.2 .6-.2s.4 .1 .6 .2L460.6 194c2.1 1.5 3.4 3.9 3.4 6.5v13.6L291.5 355.7c-20.7 17-50.4 17-71.1 0L48 214.1V200.5c0-2.6 1.2-5 3.4-6.5L255.4 48.2zM48 276.2L190 392.8c38.4 31.5 93.7 31.5 132 0L464 276.2V456c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V276.2zM256 0c-10.2 0-20.2 3.2-28.5 9.1L23.5 154.9C8.7 165.4 0 182.4 0 200.5V456c0 30.9 25.1 56 56 56H456c30.9 0 56-25.1 56-56V200.5c0-18.1-8.7-35.1-23.4-45.6L284.5 9.1C276.2 3.2 266.2 0 256 0z"/></svg>
                Get new articles via email
            </a>
          </div>
          {{ range first 1 .Site.Taxonomies.categories.article }}
          {{ partial "post-item.html" . }}
        {{ end }}
        <div class="title-button">
          <h2 class="post-title">Full posts feed</h2>
          <a href="https://juhaliikala.com/feed.xml" class="btn">
              <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="inherit" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
              Subscribe to feed via RSS
          </a>
        </div>
        {{ range $list  }}
          {{ partial "post-item.html" . }}
        {{ end }}
      {{ end }}
      {{ else }}
        {{ $paginator := .Paginate (where .Site.Pages.ByDate.Reverse "Type" "post") (index .Site.Params "archive-paginate" | default 20) }}
        {{ range $paginator.Pages  }}
          {{ partial "post-item.html" . }}
        {{ end }}
      {{ end }}
    </div>
</div>
<div class="post-nav">
    {{ if $paginator.HasPrev }}
    <span class="prev">
        <a href="{{ $paginator.Prev.URL }}" title="Previous Page"><span class="arrow">← Newer Posts</span></a>
    </span>
    {{ end }}
    {{ if $paginator.HasNext }}
    <span class="next">
        <a href="{{ $paginator.Next.URL }}"><span class="arrow">Older Posts →</span></a>
    </span>
    {{ end }}
</div>
{{ end }}
